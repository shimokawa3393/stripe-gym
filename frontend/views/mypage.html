<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>マイページ - Stripe Gym</title>
    <link rel="stylesheet" href="../styles/common.css?v=20241220">
    <link rel="stylesheet" href="../styles/mypage.css?v=20241220">
</head>

<body>
    <div class="container">
        <!-- ナビゲーションボタン -->
        <div class="nav-buttons">
            <div class="nav-section">
                <button onclick="window.location.href='home.html'" class="nav-button home-button">
                    ホーム
                </button>
                <button onclick="logout()" class="nav-button logout-button">
                    ログアウト
                </button>
            </div>
        </div>

        <div class="logo">💪 Stripe Gym</div>
        <p class="subtitle">マイページ</p>

        <!-- ユーザー情報セクション -->
        <div class="user-info-section">
            <h2>ユーザー情報</h2>
            <div class="user-details">
                <div class="user-detail-item">
                    <span class="label">お名前:</span>
                    <span id="user-name" class="value">-</span>
                </div>
                <div class="user-detail-item">
                    <span class="label">メールアドレス:</span>
                    <span id="user-email" class="value">-</span>
                </div>
                <div class="user-detail-item">
                    <span class="label">電話番号:</span>
                    <span id="user-phone" class="value">-</span>
                </div>
                <div class="user-detail-item">
                    <span class="label">生年月日:</span>
                    <span id="user-birthdate" class="value">-</span>
                </div>
                <div class="user-detail-item">
                    <span class="label">会員登録日:</span>
                    <span id="user-created" class="value">-</span>
                </div>
            </div>
        </div>

        <!-- アクティブサブスクリプション -->
        <div class="subscription-section">
            <h2>アクティブサブスクリプション</h2>
            <div id="active-subscription" class="subscription-card">
                <div class="no-data">現在アクティブなサブスクリプションはありません</div>
            </div>
            
            <!-- Stripe Customer Portal ボタン -->
            <div id="billing-portal-section" class="billing-portal-section" style="display: none;">
                <h3>支払い管理</h3>
                <p class="billing-portal-description">
                    Stripeの管理画面で支払い方法の更新、請求書の確認、プラン変更などを行えます。
                </p>
                <button id="billing-portal-button" class="billing-portal-button" onclick="startBillingPortal()">
                    💳 支払い管理（Stripe）
                </button>
            </div>
        </div>

        <!-- 購入履歴 -->
        <div class="purchase-history-section">
            <h2>購入履歴</h2>
            <div id="purchase-history" class="history-list">
                <div class="no-data">購入履歴はありません</div>
            </div>
        </div>

        <!-- サブスクリプション履歴 -->
        <div class="subscription-history-section">
            <h2>サブスクリプション履歴</h2>
            <div id="subscription-history" class="history-list">
                <div class="no-data">サブスクリプション履歴はありません</div>
            </div>
        </div>
    </div>

    <script src="../js/config.js?v=20241220"></script>
    <script src="../js/user.js?v=20240930" defer></script>
    <script src="../js/subscription.js?v=20240930" defer></script>
</body>

</html>